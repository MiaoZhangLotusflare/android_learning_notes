# 剪辑助手项目 第三天：本地视频数据获取

　　今天主要想要完成本地视频数据的获取，进一步完成本地视频功能。

## 1. 本地视频获取的方法
```
    private void getLocalVideoData() {
        //https://blog.csdn.net/u012539700/article/details/79937521
        localVideoBeanList = new ArrayList<>();
        String[] thumbColumns = {MediaStore.Video.Thumbnails.DATA,
                MediaStore.Video.Thumbnails.VIDEO_ID};

        String[] mediaColumns = {MediaStore.Video.Media._ID,
                MediaStore.Video.Media.DATA,
                MediaStore.Video.Media.DURATION};

        Cursor cursor = getContentResolver().query(
                MediaStore.Video.Media.EXTERNAL_CONTENT_URI,
                mediaColumns,
                null,
                null,
                null
        );

        if (cursor == null) {
            return;
        }
        if (cursor.moveToFirst()) {
            do {
                LocalVideoBean videoBean = new LocalVideoBean();
                int id = cursor.getInt(cursor.getColumnIndex(MediaStore.Video.Media._ID));
                Cursor thumbCurcor = getContentResolver().query(
                        MediaStore.Video.Thumbnails.EXTERNAL_CONTENT_URI,
                        thumbColumns,
                        MediaStore.Video.Thumbnails.VIDEO_ID + "=" + id,
                        null, null
                );
                if (thumbCurcor.moveToFirst()) {
                    videoBean.setThumbPath(thumbCurcor.getString(
                            thumbCurcor.getColumnIndex(MediaStore.Video.Thumbnails.DATA)));
                }
                videoBean.setPath(cursor.getString(cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DATA)));
                videoBean.setDuration(cursor.getInt(cursor.getColumnIndexOrThrow(MediaStore.Video.Media.DURATION)));
                localVideoBeanList.add(videoBean);
            } while (cursor.moveToNext());
        }
    }
```
##2. 声明权限
　　因为需要从数据库读取数据，所以还要添加一个权限的声明在 AndroidManifest.xml 中：
```
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>
```

## 总结
　　今天就写这么多，确定拿到本地视频数据就完了，接下来会写本地视频列表显示了。


