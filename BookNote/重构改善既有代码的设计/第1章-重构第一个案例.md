# 第 1 章 重构，第一个案例

​		重构是在不改变软件可观察行为的前提下改善其内部结构。

## 1.1. 起点

​		一个需要重构的例子。

​		如果你发现自己需要为程序添加一个特性，而代码结构使你无法很方便地达成目的，那就先重构那个程序，使特性的添加比较容易进行，然后再添加特性。

## 1.2. 重构的第一步

​		每当我要进行重构的时候，第一个步骤永远相同：我得为即将修改的代码建立一组可靠的测试环境。这些测试是必要的，因为尽管遵循重构手法可以使我避免绝大多数引入 bug 的情形，但我毕竟是人，毕竟有可能犯错。所以我需要可靠的测试。

## 1.3. 分解并重组 statement()

​		要知道，代码块越小，代码的功能就愈容易管理，代码的处理和移动也就越轻松。

​		好的代码应该清楚表达出自己的功能，变量名称是代码清晰的关键。

## 1.4. 运用多态取代与价格相关的条件逻辑

​		用多态替代 switch 。

## 1.5. 结语

​		重构的节奏：测试、小修改、测试、小修改、测试、小修改...... 正是这种节奏让重构得以快速而安全地前进。

