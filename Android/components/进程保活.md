# 进程保活

## 进程初步了解

　　每一个 Android 应用启动后至少对应一个进程，有的是多个进程，而且主流应用中多个进程的应用比例较大。

### 如何查看进程的基本信息

　　对于任何一个进程，都可以通过 `adb shell ps|grep <package_name>` 的方式来查看它的基本信息。

![](image/查看进程基本信息.png)

　　返回信息解释：

| 值                       | 解释                             |
| ------------------------ | -------------------------------- |
| u0_a16                   | USER 进程当前用户                |
| 3881                     | 进程 ID                          |
| 1223                     | 进程的父进程 ID                  |
| 873024                   | 进程的虚拟内存大小               |
| 37108                    | 实际驻留 “ 在内存中 ” 的内存大小 |
| com.wangjing.processlive | 进程名                           |

### 进程划分

　　Android 系统将进程划分为如下几种（重要性从高到低）。

#### 前台进程（Foreground process）

　　用户正在使用的程序，一般系统是不会杀死前台进程的，除非用户强制停止应用或系统内存不足等极端情况会杀死。

**常见场景**

1. 某个进程持有一个正在与用户交互的 Activity 并且该 Activity 正处于 resume 的状态。
2. 某个进程持有一个 Service，并且该 Service 与用户正在交互的 Activity 绑定。
3. 某个进程持有一个 Service，并且该 Service 调用 startForground() 放啊使之位于前台运行。
4. 某个进程持有一个 Service，并且该 Service 正在执行它的某个生命周期回调方法，比如 onCreate()、onStary() 或 onDestory()。
5. 某个进程持有一个 BroadcastReceiver，并且该 BroadcastReceiver 正在执行其 onReceiver() 方法。

#### 可见进程

　　用户正在使用，看得到，但是摸不着，没有覆盖到整个屏幕，只有屏幕的一部分，可见进程不包含任何前台组件，一般系统也是不会杀死可见进程的，除非要在资源吃紧的情况下，要保持某个或多个前台进程存活。



## 参考文章

[Android 进程保活的一般套路](https://juejin.im/entry/58acf391ac502e007e9a0a11)

[关于 Android 进程保活，你所需要知道的一切](https://www.jianshu.com/p/63aafe3c12af)