#  操作系统概述

[TOC]

## 1. 操作系统分类

　　操作系统分为：批处理操作系统（单道、多道）、分时操作系统（Unix）、实时操作系统（MsgOS）、网络操作系统、分布式操作系统、微机操作系统（Linux、Windows、IOS 等）、嵌入式操作系统（Android、IOS）。

## 2. 操作系统的 4 个特征

### 2.1. 并发性

　　区别于并行性，并发是指宏观上在一段时间内能同时运行多个程序，而并行则指同一时刻能运行多个指令。

　　并行需要硬件支持，如多流水线、多核处理器或者分布式计算系统。

　　操作系统通过引入进程和线程，使得程序能够并发运行。

### 2.2. 共享性

　　一般的共享是指某种资源可以被大家使用，在 OS 下的资源共享称为资源复用，具体含义是：系统中的资源可供内存中多个并发的执行的进程共同使用。

　　系统中的资源可以被内存中多个并发执行的进线程共同使用。

　　共享是指系统中的资源可以被多个并发进程共同使用。

　　有两种共享方式：互斥共享和同时共享。

　　互斥共享的资源称为临界资源，例如打印机等，在同一时刻只允许一个进程访问，需要用同步机制来实现互斥访问。

### 2.3. 虚拟性

　　通过某种技术将一个物理实体变为若干个逻辑上的对应物的功能即为虚拟，也就是虚拟技术把一个物理实体转换为多个逻辑实体。

　　主要有两种虚拟技术：时（时间）分复用技术（如分时系统）和空（空间）分复用技术（如虚拟内存）。

　　多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占用处理器，每次只执行一小个时间片并快速切换。

　　虚拟内存使用了空分复用技术，它将物理内存抽象为地址空间，每个进程都有各自的地址空间。地址空间的页被映射到物理内存，地址空间的页并不需要全部在物理内存中，当使用到一个没有在物理内存的页时，执行页面置换算法，将该页置换到内存中。

### 2.4. 异步

　　异步指进程不是一次性执行完毕，而是走走停停，每道程序完成的时间都是不可预知的，进程是以不可知的速度向前推进。

## 3. 操作系统的基本功能

　　操作系统的功能有：进程管理、文件管理、存储管理、设备管理、作业管理。

### 3.1. 进程管理

　　也称处理机管理，实质上是对处理机执行时间进行管理，采用多道程序等技术将 CPU 的时间真正合理地分配给每个任务。

　　主要包括进程管理、进程同步、进程通信和进程调度。

### 3.2. 文件管理

　　又称信息管理，主要包括文件存储空间管理、目录管理、文件读写管理和存取管理。

### 3.3. 内存管理

　　也称为存储管理，是对主存储器空间的管理。

　　主要包括存储分配与回收、存储保护与共享、地址映射（变换）和主存扩充。

### 3.4. 设备管理

　　实质上是对硬件设备进行管理，完成用户的 I/O 请求，方便用户使用各种设备，并提高设备的利用率。

　　其中包括缓冲管理、输入输出设备的分配、启动、完成和回收、设备处理、虚拟设备。

### 3.5. 作业管理

　　包括人物、人机交互和用户界面管理等。

## 4. 系统调用

　　如果一个进程在用户态需要使用内核态的功能，就进行系统调用从而陷入内核，由操作系统代为完成。

![](image/系统调用.png)

　　Linux 的系统调用主要有以下这些：

| Task     | Commands                  |
| -------- | ------------------------- |
| 进程控制 | fork();exit();wait();     |
| 进程通信 | pipe();shmge();mmap();    |
| 文件操作 | open();read();write();    |
| 设备操作 | ioctl();read();write();   |
| 信息维护 | getpid();alarm();sleep(); |
| 安全     | chmod();umask();chown();  |

## 5. 大内核和微内核

### 5.1. 大内核

　　大内核是将操作系统功能作为一个紧密结合的整体放到内核。

　　由于各模块共享信息，因此有很高的性能。

### 5.2. 微内核

　　由于操作系统不断复杂，因此将一部分操作系统功能移除内核，从而降低内核的复杂性。移出的部分根据分层的原则划分成若干服务，相互独立。

　　在微内核结构下，操作系统被划分成小的、定义良好的模块，只有微内核这一模块运行在内核态，其余模块运行在用户态。

　　因为需要频繁地在用户态和核心态之间进行切换，所以会有一定的性能损失。

![](image/微内核.jpg)

## 6. 中断分类

### 6.1. 外中断

　　由 CPU 执行指令以外的事件引起，如 I/O 完成中断，表示设备输入 / 输出处理已经完成，处理器能够发送下一个输入 / 输出请求。

### 6.2. 异常

　　由 CPU 执行指令的内部事件引起，如非法操作码、地址越界、算术溢出等。

### 6.3. 陷入

　　在用户程序中使用系统调用。

## 7. 参考文章

1. [操作系统基础知识总结整理](https://blog.csdn.net/Song_JiangTao/article/details/79670805)
3. [计算机操作系统](https://github.com/CyC2018/CS-Notes/blob/master/notes/计算机操作系统 - 目录.md)
